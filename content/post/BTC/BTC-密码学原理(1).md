---
title: "BTC 密码学原理(1)"
date: 2020-08-23T20:04:54+08:00
tags:
- 区块链
Categories:
- 比特币
---

###### 比特币是一种加密货币——crypto-currency，但是其实加密的货币是不加密的，区块链上的数据都是公开的，包括账户的地址，转账的金额等。

## 比特币中主要用到了密码学中的两个重要技术：1.hash   2.签名

#### 1.密码学中的hash函数（cryptographic hash function）

##### hash函数具有两个重要的性质：

（1）**collision resisitant(hash碰撞)** ：如果两个不同的输入能得到同一个输出，那这就是hash碰撞，即如果x不等于y，但是H(x)=H(y)。原则上，hash函数的碰撞是不可避免的，因为输入空间是远远大于输出空间的，比如有一个256位的hash值，那么最多可以表示2的256次方个hash，但是输入空间确实无限大的，即有任意多种输入的可能性，所以必然会出现两个输入映射到同一个输出的情况。但是没有什么有效的方法可以去找到有相同输出的两个输入，如果硬是要求解，就只能一个一个去试所有的输入（蛮力求解——brute-force），看哪两个符合。但是工作量很大。

​       **作用**：可以用来对一个message求hash,可以用来检测message是否被篡改。如果message有一点变化，那么hash值就会变化。所以可以保证攻击者无法篡改内容的同时又不被检测出来。MD5已经被破解

（2）**hiding(hash函数的计算过程是单向不可逆的)**：X->H(X)，也就是说无法通过hash值反过来推导出原来的X，当然从理论上讲，只有通过蛮力的方式，通过不断尝试X，看看哪个H(x)与预期的hash值相同，就能得出原来的X，当然实际中是无法这样的，因为输入是无穷的。这个性质成立的前提是输入X的取值范围足够大，而且输入的分布比较均匀（数字，字母，字符等），使得这种蛮力求解的方式变得不可行。

当然如果分布得不均匀，可以在X后面加一个随机数nounce拼接起来然后取hash,从而保证拼接之后输入是足够随机和均匀的。

----

##### 注意：hash函数的这两个性质可以实现数字信封（digital commitment/digital equivalent of a sealed envelop）

（3）**puzzle friendly(不可预测的)**：这是比特币中要求的hash函数的性质，也就是说通过输入，你是无法预测这个hash值落在哪个范围之内。唯一的办法就是蛮力，一个一个去试，看哪个输入算出来恰好落在要求的范围之内。比如说：你想得到一个hash值，前面k位都是0，后面是任意的，000......0000xxxxxxxx，所以要想得到这个输入值，只能一个一个去试。在比特币中挖矿也有这个概念——挖矿，挖矿的过程就是寻找这个随机数nounce的过程，这个nounce跟区块的块头中的其他信息合在一起，作为输入，取出一个hash值，这个hash值要小于等于指定的目标预值，即 **H(Block header)<=Target**.挖矿就是不断地取nounce。**这个性质使得挖矿的过程没有捷径，只能靠不停地去试来获得这个nounce，所以这个过程就可以用来作为工作量证明**。挖矿很难，但是验证很容易（difficult to solve but easy to verify）。



### 2.签名

比特币中的账户模型是一对公私钥，公钥代表账户的账号，私钥代表账户的密码。

签名是用私钥进行签名，别人用公钥来验证签名的真实性。所以在比特币网络中进行交易时，通常将自己发起的交易用自己的私钥进行签名，然后发布到网络，然后其他人通过签名来验证确实是我做的交易，而不是其他人冒充。