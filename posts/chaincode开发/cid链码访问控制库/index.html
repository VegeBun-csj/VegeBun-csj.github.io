<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.74.3" /><meta name="theme-color" content="#fff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>é“¾ç çš„è®¿é—®æ§åˆ¶(cidåº“) | VegeBun-csjâ€™s blog</title>

    <link rel="stylesheet" href="/css/meme.min.b0d324d4edc32df95e3dfd01e584c8f7650a0a1ccc54668a2b2afb5736470a5e.css" integrity="sha256-sNMk1O3DLflePf0B5YTI92UKChzMVGaKKyr7VzZHCl4=" />

    
    
        <script src="/js/meme.min.fef3f4116ec8ee1ae0f93c6665f15904241c992e1a8ffb62b89fa18f3389bcb6.js" integrity="sha256-/vP0EW7I7hrg&#43;TxmZfFZBCQcmS4aj/tiuJ&#43;hjzOJvLY="></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="Bun" /><meta name="description" content="Client Identity Chaincode Libraryï¼ˆå®¢æˆ·ç«¯æ ‡è¯†é“¾ä»£ç åº“ï¼‰ The client identity chaincode library enables you to write chaincode which makes access control decisions based on the identity of theâ€¦â€¦" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="VegeBun-csjâ€™s blog" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="VegeBun-csjâ€™s blog" />
    <meta name="msapplication-starturl" content="../../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2020-08-29T13:27:15+08:00",
        "dateModified": "2020-10-16T19:30:45+08:00",
        "url": "https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/",
        "headline": "é“¾ç çš„è®¿é—®æ§åˆ¶(cidåº“)",
        "description": "Client Identity Chaincode Libraryï¼ˆå®¢æˆ·ç«¯æ ‡è¯†é“¾ä»£ç åº“ï¼‰ The client identity chaincode library enables you to write chaincode which makes access control decisions based on the identity of theâ€¦â€¦",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  6992 ,
        "image": "https://VegeBun-csj.github.io/icons/apple-touch-icon.png",
        "author": {
            "@type": "Person",
            "description": "make progress every day",
            "email": "1071285741@qq.com",
            "image": "https://VegeBun-csj.github.io/icons/apple-touch-icon.png",
            "url": "https://VegeBun-csj.github.io",
            "name": "Bun"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "VegeBun-csjâ€™s blog",
            "logo": {
                "@type": "ImageObject",
                "url": "https://VegeBun-csj.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://VegeBun-csj.github.io/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://VegeBun-csj.github.io/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary" />

<meta name="twitter:site" content="@bun" />
<meta name="twitter:creator" content="@Bun" />

    



<meta property="og:title" content="é“¾ç çš„è®¿é—®æ§åˆ¶(cidåº“)" />
<meta property="og:description" content="Client Identity Chaincode Libraryï¼ˆå®¢æˆ·ç«¯æ ‡è¯†é“¾ä»£ç åº“ï¼‰ The client identity chaincode library enables you to write chaincode which makes access control decisions based on the identity of theâ€¦â€¦" />
<meta property="og:url" content="https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/" />
<meta property="og:site_name" content="VegeBun-csjâ€™s blog" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://VegeBun-csj.github.io/icons/apple-touch-icon.png" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-08-29T13:27:15&#43;08:00" />
    <meta property="article:modified_time" content="2020-10-16T19:30:45&#43;08:00" />
    
    <meta property="article:section" content="posts" />



    
</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">VegeBun-csjâ€™s blog</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="/posts/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">æ–‡ç« </span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg><span class="menu-item-name">åˆ†ç±»</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">æ ‡ç­¾</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">å…³äº</span></a>
                </li>
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5l48.8-97.5a18 18 0 0128 0l48.8 97.5 103.4 -34.5a18 18 0 0119.8 19.8l-34.5 103.4l97.5 48.8a18 18 0 010 28l-97.5 48.8 34.5 103.4a18 18 0 01-19.8 19.8l-103.4-34.5-48.8 97.5a18 18 0 01-28 0l-48.8-97.5l-103.4 34.5a18 18 0 01-19.8-19.8l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8-34.5-103.4a18 18 0 0119.8-19.8zM256 128a128 128 0 10.01 0M256 160a96 96 0 10.01 0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412a256 256 0 10154-407a11.5 11.5 0 00-5 20a201.5 201.5 0 01-134 374a11.5 11.5 0 00-15 13"/></svg></a>
                        </li>
                    
                
            
        
            
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title">é“¾ç çš„è®¿é—®æ§åˆ¶(cidåº“)</h1>

            

            
                
            

            
                

<div class="post-meta">
    
        
        <time datetime="2020-08-29T13:27:15&#43;08:00" class="post-meta-item published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;2020.8.29</time>
    
    
        
        <time datetime="2020-10-16T19:30:45&#43;08:00" class="post-meta-item modified"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2020.10.16</time>
    
    
    
        
        
        
            
                <span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href="/categories/hyperledger-fabric-chincode%E5%BC%80%E5%8F%91/" class="category-link">Hyperledger Fabric--chincodeå¼€å‘</a></span>
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;6992</span>
    
    
        
        <span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;14&nbsp;åˆ†é’Ÿ</span>
    
    
    
</div>

            

            <div class="post-body">
              <h1 id="client-identity-chaincode-libraryå®¢æˆ·ç«¯æ ‡è¯†é“¾ä»£ç åº“"><a href="#client-identity-chaincode-libraryå®¢æˆ·ç«¯æ ‡è¯†é“¾ä»£ç åº“" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Client Identity Chaincode Libraryï¼ˆå®¢æˆ·ç«¯æ ‡è¯†é“¾ä»£ç åº“ï¼‰</h1>
<p>The client identity chaincode library enables you to write chaincode which
makes access control decisions based on the identity of the client
(i.e. the invoker of the chaincode).  In particular, you may make access
control decisions based on either or both of the following associated with
the client:</p>
<p>å®¢æˆ·ç«¯æ ‡è¯†é“¾ç åº“ä½¿æ‚¨èƒ½å¤Ÿç¼–å†™åŸºäºå®¢æˆ·ç«¯æ ‡è¯†(å³é“¾ç çš„è°ƒç”¨è€…)è¿›è¡Œè®¿é—®æ§åˆ¶å†³ç­–çš„é“¾ç ã€‚
ç‰¹åˆ«æ˜¯ï¼Œæ‚¨å¯ä»¥æ ¹æ®ä¸å®¢æˆ·ç«¯å…³è”çš„ä¸‹åˆ—ä»»ä¸€é¡¹æˆ–ä¸¤é¡¹è¿›è¡Œè®¿é—®æ§åˆ¶å†³ç­–</p>
<ul>
<li>the client identity's MSP (Membership Service Provider) IDï¼ˆå®¢æˆ·ç«¯èº«ä»½çš„MSP(ä¼šå‘˜æœåŠ¡æä¾›è€…)IDï¼‰</li>
<li>an attribute associated with the client identityï¼ˆä¸å®¢æˆ·ç«¯èº«ä»½å…³è”çš„å±æ€§ï¼‰</li>
</ul>
<p>Attributes are simply name and value pairs associated with an identity.
For example, <code>email=me@gmail.com</code> indicates an identity has the <code>email</code>
attribute with a value of <code>me@gmail.com</code>.</p>
<p>å±æ€§åªæ˜¯ä¸èº«ä»½å…³è”çš„é”®å€¼å¯¹ã€‚ä¾‹å¦‚ï¼Œemail=me@gmail.comè¡¨ç¤ºä¸€ä¸ªæœ‰ç€emailå±æ€§ï¼Œå€¼ä¸ºme@gmail.comçš„èº«ä»½</p>
<h2 id="using-the-client-identity-chaincode-libraryä½¿ç”¨æ–¹æ³•"><a href="#using-the-client-identity-chaincode-libraryä½¿ç”¨æ–¹æ³•" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Using the client identity chaincode libraryï¼ˆä½¿ç”¨æ–¹æ³•ï¼‰</h2>
<p>This section describes how to use the client identity chaincode library.</p>
<p>All code samples below assume two things:</p>
<ol>
<li>
<p>The type of the <code>stub</code> variable is <code>ChaincodeStubInterface</code> as passed
to your chaincode. å°†stubä½œä¸º<code>ChaincodeStubInterface</code>æ¥å£ä¼ å…¥chaincode</p>
</li>
<li>
<p>You have added the following import statement to your chaincode.  å¯¼å…¥ç›¸å…³çš„åŒ…</p>
<pre><code>import &quot;github.com/hyperledger/fabric/core/chaincode/lib/cid&quot;
</code></pre></li>
</ol>
<h4 id="getting-the-clients-idè·å–å®¢æˆ·ç«¯id"><a href="#getting-the-clients-idè·å–å®¢æˆ·ç«¯id" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting the client's IDï¼ˆè·å–å®¢æˆ·ç«¯idï¼‰</h4>
<p>The following demonstrates how to get an ID for the client which is guaranteed
to be unique within the MSP:  ä¸‹é¢æ¼”ç¤ºäº†å¦‚ä½•ä¸ºå®¢æˆ·ç«¯è·å–ä¸€ä¸ªIDï¼Œå®ƒä¿è¯åœ¨MSPä¸­æ˜¯å”¯ä¸€çš„:</p>
<pre><code>id, err := cid.GetID(stub)
</code></pre><h4 id="getting-the-msp-idè·å–mspid"><a href="#getting-the-msp-idè·å–mspid" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting the MSP IDï¼ˆè·å–mspidï¼‰</h4>
<p>The following demonstrates how to get the MSP ID of the client's identity: ä¸‹é¢æ¼”ç¤ºå¦‚ä½•è·å–å®¢æˆ·ç«¯èº«ä»½çš„MSP ID:</p>
<pre><code>mspid, err := cid.GetMSPID(stub)
</code></pre><h4 id="getting-an-attribute-valueè·å–å±æ€§å€¼"><a href="#getting-an-attribute-valueè·å–å±æ€§å€¼" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting an attribute valueï¼ˆè·å–å±æ€§å€¼ï¼‰</h4>
<p>The following demonstrates how to get the value of the <em>attr1</em> attribute:ä¸‹é¢æ¼”ç¤ºäº†å¦‚ä½•è·å–attr1å±æ€§çš„å€¼:</p>
<pre><code>val, ok, err := cid.GetAttributeValue(stub, &quot;attr1&quot;)
if err != nil {
   // There was an error trying to retrieve the attribute
}
if !ok {
   // The client identity does not possess the attribute
}
// Do something with the value of 'val'
</code></pre><h4 id="asserting-an-attribute-value-æ–­è¨€å±æ€§å€¼åˆ¤æ–­attrçš„keyæ˜¯å¦ä¸ºå¯¹åº”çš„value"><a href="#asserting-an-attribute-value-æ–­è¨€å±æ€§å€¼åˆ¤æ–­attrçš„keyæ˜¯å¦ä¸ºå¯¹åº”çš„value" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Asserting an attribute value æ–­è¨€å±æ€§å€¼ï¼ˆåˆ¤æ–­Attrçš„keyæ˜¯å¦ä¸ºå¯¹åº”çš„valueï¼‰</h4>
<p>Often all you want to do is to make an access control decision based on the value
of an attribute, i.e. to assert the value of an attribute.  For example, the following
will return an error if the client does not have the <code>myapp.admin</code> attribute
with a value of <code>true</code>:p</p>
<p>é€šå¸¸ï¼Œæ‚¨æƒ³åšçš„å°±æ˜¯æ ¹æ®å±æ€§çš„å€¼åšå‡ºè®¿é—®æ§åˆ¶å†³ç­–ï¼Œå³æ–­è¨€å±æ€§çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®¢æˆ·ç«¯myapp.adminçš„å±æ€§å€¼ä¸ä¸ºtrueï¼Œä¸‹é¢çš„ä»£ç å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p>
<pre><code>err := cid.AssertAttributeValue(stub, &quot;myapp.admin&quot;, &quot;true&quot;)
if err != nil {
   // Return an error
}
</code></pre><p>This is effectively using attributes to implement role-based access control,
or RBAC for short.</p>
<p>è¿™æ˜¯æœ‰æ•ˆåœ°ä½¿ç”¨å±æ€§æ¥å®ç°åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼Œç®€ç§°RBACã€‚</p>
<h4 id="getting-the-clients-x509-certificate------------è·å–å®¢æˆ·ç«¯çš„x509è¯ä¹¦"><a href="#getting-the-clients-x509-certificate------------è·å–å®¢æˆ·ç«¯çš„x509è¯ä¹¦" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting the client's X509 certificate            è·å–å®¢æˆ·ç«¯çš„X509è¯ä¹¦</h4>
<p>The following demonstrates how to get the X509 certificate of the client, or
nil if the client's identity was not based on an X509 certificate:</p>
<p>ä¸‹é¢æ¼”ç¤ºäº†å¦‚ä½•è·å¾—å®¢æˆ·ç«¯çš„X509è¯ä¹¦ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„èº«ä»½ä¸æ˜¯åŸºäºX509è¯ä¹¦ï¼Œåˆ™ä¸ºnil:</p>
<pre><code>cert, err := cid.GetX509Certificate(stub)
</code></pre><p>Note that both <code>cert</code> and <code>err</code> may be nil as will be the case if the identity
is not using an X509 certificate.</p>
<p>è¯·æ³¨æ„ï¼Œcertå’Œerréƒ½å¯èƒ½ä¸ºnilï¼Œå¦‚æœå®¢æˆ·ç«¯èº«ä»½æ²¡æœ‰ä½¿ç”¨X509è¯ä¹¦ï¼Œåˆ™å°†å‡ºç°è¿™ç§æƒ…å†µã€‚</p>
<h4 id="performing-multiple-operations-more-efficientlyæ›´æœ‰æ•ˆåœ°æ‰§è¡Œå¤šä¸ªæ“ä½œ"><a href="#performing-multiple-operations-more-efficientlyæ›´æœ‰æ•ˆåœ°æ‰§è¡Œå¤šä¸ªæ“ä½œ" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Performing multiple operations more efficientlyï¼ˆæ›´æœ‰æ•ˆåœ°æ‰§è¡Œå¤šä¸ªæ“ä½œï¼‰</h4>
<p>Sometimes you may need to perform multiple operations in order to make an access
decision.  For example, the following demonstrates how to grant access to
identities with MSP <em>org1MSP</em> and <em>attr1</em> OR with MSP <em>org1MSP</em> and <em>attr2</em>.</p>
<p>æœ‰æ—¶æ‚¨å¯èƒ½éœ€è¦æ‰§è¡Œå¤šä¸ªæ“ä½œæ‰èƒ½åšå‡ºè®¿é—®å†³ç­–ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨MSP org1MSPå’Œattr1æˆ–MSP org1MSPå’Œattr2æˆäºˆèº«ä»½çš„è®¿é—®æƒã€‚</p>
<pre><code>// Get the client ID object
id, err := cid.New(stub)
if err != nil {
   // Handle error
}
mspid, err := id.GetMSPID()
if err != nil {
   // Handle error
}
switch mspid {
   case &quot;org1MSP&quot;:
      err = id.AssertAttributeValue(&quot;attr1&quot;, &quot;true&quot;)
   case &quot;org2MSP&quot;:
      err = id.AssertAttributeValue(&quot;attr2&quot;, &quot;true&quot;)
   default:
      err = errors.New(&quot;Wrong MSP&quot;)
}
</code></pre><p>Although it is not required, it is more efficient to make the <code>cid.New</code> call
to get the ClientIdentity object if you need to perform multiple operations,
as demonstrated above.</p>
<p>è™½ç„¶ä¸æ˜¯å¿…éœ€çš„ã€‚å¦‚æœéœ€è¦æ‰§è¡Œå¤šä¸ªæ“ä½œï¼Œç”¨<code>cid.New</code>è°ƒç”¨æ¥è·å–ClientIdentityå¯¹è±¡æ˜¯éå¸¸æœ‰æ•ˆçš„ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚</p>
<h2 id="adding-attributes-to-identitieså‘èº«ä»½æ·»åŠ å±æ€§"><a href="#adding-attributes-to-identitieså‘èº«ä»½æ·»åŠ å±æ€§" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Adding Attributes to Identitiesï¼ˆå‘èº«ä»½æ·»åŠ å±æ€§ï¼‰</h2>
<p>This section describes how to add custom attributes to certificates when
using Hyperledger Fabric CA as well as when using an external CA.</p>
<p>æœ¬èŠ‚æè¿°å¦‚ä½•åœ¨ä½¿ç”¨Hyperledger Fabric CAæ—¶ä»¥åŠåœ¨ä½¿ç”¨å¤–éƒ¨CAæ—¶å‘è¯ä¹¦æ·»åŠ è‡ªå®šä¹‰å±æ€§ã€‚</p>
<h4 id="managing-attributes-with-fabric-caä½¿ç”¨fabric-caç®¡ç†å±æ€§"><a href="#managing-attributes-with-fabric-caä½¿ç”¨fabric-caç®¡ç†å±æ€§" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Managing attributes with Fabric CAï¼ˆä½¿ç”¨Fabric CAç®¡ç†å±æ€§ï¼‰</h4>
<p>There are two methods of adding attributes to an enrollment certificate
with fabric-ca:</p>
<p>ï¼ˆä½¿ç”¨fabric-caå‘æ³¨å†Œè¯ä¹¦æ·»åŠ å±æ€§æœ‰ä¸¤ç§æ–¹æ³•:ï¼‰</p>
<ol>
<li>
<p>When you register an identity, you can specify that an enrollment certificate
issued for the identity should by default contain an attribute.  This behavior
can be overridden at enrollment time, but this is useful for establishing
default behavior and, assuming registration occurs outside of your application,
does not require any application change.</p>
<p>å½“æ‚¨æ³¨å†Œä¸€ä¸ªèº«ä»½æ—¶ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸ºè¯¥èº«ä»½é¢å‘çš„ç™»è®°è¯ä¹¦ï¼ˆe-certï¼‰åœ¨ç¼ºçœæƒ…å†µä¸‹åº”è¯¥åŒ…å«ä¸€ä¸ªå±æ€§(attribute)ã€‚å¯ä»¥åœ¨æ³¨å†Œæ—¶è¦†ç›–æ­¤è¡Œä¸ºï¼Œä½†è¿™å¯¹äºå»ºç«‹é»˜è®¤è¡Œä¸ºéå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”å‡è®¾æ³¨å†Œå‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºä¹‹å¤–ï¼Œä¸éœ€è¦å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œä»»ä½•æ›´æ”¹ã€‚</p>
<p>The following shows how to register <em>user1</em> with two attributes:
<em>app1Admin</em> and <em>email</em>.
The &quot;:ecert&quot; suffix causes the <em>appAdmin</em> attribute to be inserted into user1's
enrollment certificate by default.  The <em>email</em> attribute is not added
to the enrollment certificate by default.</p>
<p>ä¸‹é¢å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸¤ä¸ªå±æ€§ app1Adminå’Œemailæ³¨å†Œuser1ã€‚â€œ:ecertâ€åç¼€åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šå°†appAdminå±æ€§æ’å…¥user1çš„ç™»è®°è¯ä¹¦ï¼ˆe-certï¼‰ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæœªå°†emailå±æ€§æ·»åŠ åˆ°ç™»è®°è¯ä¹¦(e-cert)ä¸­</p>
<pre><code>fabric-ca-client register --id.name user1 --id.secret user1pw --id.type user --id.affiliation org1 --id.attrs 'app1Admin=true:ecert,email=user1@gmail.com'
</code></pre></li>
<li>
<p>When you enroll an identity, you may request that one or more attributes
be added to the certificate.
For each attribute requested, you may specify whether the attribute is
optional or not.  If it is not optional but does not exist for the identity,
enrollment fails.</p>
<p>å½“æ‚¨ç™»è®°ä¸€ä¸ªèº«ä»½æ—¶ï¼Œæ‚¨å¯ä»¥è¯·æ±‚å°†ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§æ·»åŠ åˆ°è¯ä¹¦ä¸­ã€‚å¯¹äºè¯·æ±‚çš„æ¯ä¸ªå±æ€§ï¼Œæ‚¨å¯ä»¥æŒ‡å®šè¯¥å±æ€§æ˜¯å¦æ˜¯å¯é€‰çš„ã€‚å¦‚æœè¯¥èº«ä»½çš„å±æ€§æ˜¯å¿…é€‰çš„ï¼Œä½†ä¸å­˜åœ¨ï¼Œåˆ™ç™»è®°å¤±è´¥ã€‚</p>
<p>The following shows how to enroll <em>user1</em> with the <em>email</em> attribute,
without the <em>app1Admin</em> attribute and optionally with the <em>phone</em> attribute
(if the user possesses <em>phone</em> attribute).</p>
<p>ä¸‹é¢å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨emailå±æ€§æ³¨å†Œuser1ï¼Œä¸ä½¿ç”¨app1Adminå±æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨phoneå±æ€§(å¦‚æœç”¨æˆ·æ‹¥æœ‰phoneå±æ€§)ã€‚</p>
<pre><code>fabric-ca-client enroll -u http://user1:user1pw@localhost:7054 --enrollment.attrs &quot;email,phone:opt&quot;
</code></pre></li>
</ol>
<h4 id="attribute-format-in-a-certificate-è¯ä¹¦ä¸­çš„å±æ€§æ ¼å¼"><a href="#attribute-format-in-a-certificate-è¯ä¹¦ä¸­çš„å±æ€§æ ¼å¼" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Attribute format in a certificate ï¼ˆè¯ä¹¦ä¸­çš„å±æ€§æ ¼å¼ï¼‰</h4>
<p>Attributes are stored inside an X509 certificate as an extension with an
ASN.1 OID (Abstract Syntax Notation Object IDentifier)
of <code>1.2.3.4.5.6.7.8.1</code>.  The value of the extension is a JSON string of the
form <code>{&quot;attrs&quot;:{&lt;attrName&gt;:&lt;attrValue}}</code>.  The following is a sample of a
certificate which contains the <code>attr1</code> attribute with a value of <code>val1</code>.
See the final entry in the <em>X509v3 extensions</em> section.  Note also that the JSON
entry could contain multiple attributes, though this sample shows only one.</p>
<p>å±æ€§ä½œä¸ºæ‰©å±•åå­˜å‚¨åœ¨X509è¯ä¹¦ä¸­ï¼Œå…¶ASN.1 OID(æŠ½è±¡è¯­æ³•ç¬¦å·å¯¹è±¡æ ‡è¯†ç¬¦)ä¸º1.2.3.4.5.6.7.8.1ã€‚è¯¥æ‰©å±•çš„å€¼æ˜¯ä»¥{&quot;attrs&quot;:{<attrName>:&lt;attrValue}}ï¼ˆå±æ€§åï¼Œå±æ€§å€¼è¿™ç§é”®å€¼å¯¹ï¼‰ä¸ºå½¢å¼çš„JSONå­—ç¬¦ä¸²ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¯ä¹¦ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«å€¼ä¸ºval1çš„attr1å±æ€§ã€‚è¯·å‚é˜…X509v3æ‰©å±•éƒ¨åˆ†ä¸­çš„æœ€åä¸€é¡¹ã€‚è¿˜è¦æ³¨æ„ï¼ŒJSONæ¡ç›®å¯ä»¥åŒ…å«å¤šä¸ªå±æ€§ï¼Œä½†æœ¬ç¤ºä¾‹åªæ˜¾ç¤ºäº†ä¸€ä¸ªå±æ€§ã€‚</p>
<pre><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            1e:49:98:e9:f4:4f:d0:03:53:bf:36:81:c0:a0:a4:31:96:4f:52:75
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: CN=fabric-ca-server
        Validity
            Not Before: Sep  8 03:42:00 2017 GMT
            Not After : Sep  8 03:42:00 2018 GMT
        Subject: CN=MyTestUserWithAttrs
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
            EC Public Key:
                pub:
                    04:e6:07:5a:f7:09:d5:af:38:e3:f7:a2:90:77:0e:
                    32:67:5b:70:a7:37:ca:b5:c9:d8:91:77:39:ae:03:
                    a0:36:ad:72:b3:3c:89:6d:1e:f6:1b:6d:2a:88:49:
                    92:6e:6e:cc:bc:81:52:fa:19:88:18:5c:d7:6e:eb:
                    d4:73:cc:51:79
                ASN1 OID: prime256v1
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                D8:28:B4:C0:BC:92:4A:D3:C3:8C:54:6C:08:86:33:10:A6:8D:83:AE
            X509v3 Authority Key Identifier:
                keyid:C4:B3:FE:76:0D:E2:DE:3C:FC:75:FB:AE:55:86:04:F0:BB:7F:F6:01

            X509v3 Subject Alternative Name:
                DNS:Anils-MacBook-Pro.local
            1.2.3.4.5.6.7.8.1:
                {&quot;attrs&quot;:{&quot;attr1&quot;:&quot;val1&quot;}}
    Signature Algorithm: ecdsa-with-SHA256
        30:45:02:21:00:fb:84:a9:65:29:b2:f4:d3:bc:1a:8b:47:92:
        5e:41:27:2d:26:ec:f7ğŸ’¿aa:86:46:a4:ac:da:25:be:40:1d:
        c5:02:20:08:3f:49:86:58:a7:20:48:64:4c:30:1b:da:a9:a2:
        f2:b4:16:28:f6:fd:e1:46:dd:6b:f2:3f:2f:37:4a:4c:72
</code></pre><p>If you want to use the client identity library to extract or assert attribute
values as described previously but you are not using Hyperledger Fabric CA,
then you must ensure that the certificates which are issued by your external CA
contain attributes of the form shown above.  In particular, the certificates
must contain the <code>1.2.3.4.5.6.7.8.1</code> X509v3 extension with a JSON value
containing the attribute names and values for the identity.</p>
<p>å¦‚æœæ‚¨æƒ³ä½¿ç”¨å‰é¢æè¿°çš„å®¢æˆ·ç«¯èº«ä»½åº“æ¥æå–æˆ–æ–­è¨€å±æ€§å€¼ï¼Œä½†æ˜¯æ‚¨æ²¡æœ‰ä½¿ç”¨Hyperledger Fabric CAï¼Œé‚£ä¹ˆæ‚¨å¿…é¡»ç¡®ä¿ç”±æ‚¨çš„å¤–éƒ¨CAé¢å‘çš„è¯ä¹¦åŒ…å«ä¸Šé¢æ‰€ç¤ºè¡¨å•çš„å±æ€§ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¯ä¹¦å¿…é¡»åŒ…å«1.2.3.4.5.6.7.8.1 X509v3æ‰©å±•ï¼Œå…¶JSONå€¼åŒ…å«æ ‡è¯†çš„å±æ€§åå’Œå€¼ã€‚</p>
<hr>
<p>ä¸‹é¢åˆ—ä¸¾ä¸€ä¸ªå®é™…ä½¿ç”¨çš„ä¾‹å­ï¼š<strong>(æ³¨æ„åœ¨åˆçº¦ä¸­å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼Œå³cidåº“æ–‡ä»¶ï¼Œè¿™é‡Œå¯ä»¥å€Ÿé‰´fabric-samples/chaincode/abacä¸­çš„åº“çš„å¼•ç”¨)</strong></p>
<p>æ­¤é“¾ç åº“cidæ˜¯ç”¨æ¥è¿›è¡Œé“¾ç æ“ä½œæƒé™çš„æ§åˆ¶çš„ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªattrsçš„name-valueè¯¥å¦‚ä½•è·å–å‘¢ï¼Œä»ä¸Šé¢çš„è§£é‡Šä¸­å¯ä»¥çœ‹åˆ°è·ŸCAæœ‰å…³ï¼Œæ‰€ä»¥æ˜¯åœ¨æˆ‘ä»¬æ³¨å†Œç”¨æˆ·èº«ä»½çš„æ—¶å€™è¿›è¡Œè®¾ç½®çš„ï¼Œä¸‹é¢åˆ—ä¸¾ä½¿ç”¨Node sdkè¿›è¡Œåˆå§‹åŒ–è®¾ç½®attrsçš„ä¾‹å­</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"> <span class="kr">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span>
     <span class="p">{</span>
       <span class="nx">affiliation</span><span class="o">:</span> <span class="s1">&#39;org1.department1&#39;</span><span class="p">,</span>
       <span class="nx">enrollmentID</span><span class="o">:</span> <span class="s1">&#39;cai&#39;</span><span class="p">,</span>
       <span class="nx">role</span><span class="o">:</span> <span class="s1">&#39;client&#39;</span><span class="p">,</span>
       <span class="nx">attrs</span><span class="o">:</span> <span class="p">[</span>					<span class="c1">//åœ¨registerçš„ä¼ å…¥å±æ€§ä¸­æœ‰attrsè¿™ä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªArrayæ•°ç»„
</span><span class="c1"></span>       <span class="p">{</span>						<span class="c1">//å…¶ä¸­ä¼ å…¥ä¸‰ä¸ª
</span><span class="c1"></span>         <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;usertype&#39;</span><span class="p">,</span>		<span class="c1">//attrsçš„nameï¼Œä¹Ÿå°±æ˜¯key
</span><span class="c1"></span>         <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;storeshop&#39;</span><span class="p">,</span>	<span class="c1">//attrsçš„valueï¼Œä¹Ÿå°±æ˜¯keyå¯¹åº”çš„å€¼
</span><span class="c1"></span>         <span class="nx">ecert</span><span class="o">:</span> <span class="kc">true</span>			<span class="c1">//ecertä¸ºtrueè¡¨ç¤ºé»˜è®¤æƒ…å†µä¸‹åº”å°†æ­¤å±æ€§åŒ…æ‹¬åœ¨æ³¨å†Œè¯ä¹¦ä¸­(é»˜è®¤)
</span><span class="c1"></span>      <span class="p">}]</span>
     <span class="p">},</span>
    <span class="nx">adminIdentity</span>
   <span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><p>ä¸Šé¢å°±æ˜¯è®¾ç½®äº†attrsçš„nameæ˜¯usertype,valueæ˜¯storeshop</p>
<p>é“¾ç æˆ‘ä»¬æ˜¯ä»¥å®˜æ–¹çš„fabcaré“¾ç è¿›è¡Œäº†å°å°çš„ä¿®æ”¹ï¼Œåœ°å€å¦‚ä¸‹ï¼š</p>
<blockquote>
<p><a href="https://github.com/VegeBun-csj/learning-chaincode/blob/master/access-control/go/fabcar.go" target="_blank" rel="noopener">https://github.com/VegeBun-csj/learning-chaincode/blob/master/access-control/go/fabcar.go</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">//æ ¹æ®nameè·å–ç”¨æˆ·çš„attrçš„å€¼
</span><span class="c1">//è¿™é‡Œå°±æ˜¯æ ¹æ®name--usertypeæ¥è·å–æˆ‘ä»¬æ³¨å†Œæ—¶è®¾ç½®çš„valueï¼Œå¦‚æœä½¿ç”¨ä¸Šé¢æ³¨å†Œæ—¶çš„èº«ä»½userè¿›è¡Œè°ƒç”¨å°±ä¼šè·å–åˆ°usertypeå¯¹åº”çš„valueæ˜¯storeshop
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">SmartContract</span><span class="p">)</span><span class="nf">getAttr</span><span class="p">(</span><span class="nx">APIstub</span> <span class="nx">shim</span><span class="p">.</span><span class="nx">ChaincodeStubInterface</span><span class="p">)</span> <span class="nx">sc</span><span class="p">.</span><span class="nx">Response</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">,</span> <span class="nx">found</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">cid</span><span class="p">.</span><span class="nf">GetAttributeValue</span><span class="p">(</span><span class="nx">APIstub</span><span class="p">,</span> <span class="s">&#34;usertype&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">found</span> <span class="o">==</span> <span class="kc">false</span> <span class="p">{</span>
  	 <span class="nx">shim</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="s">&#34;æœªæŸ¥è¯¢åˆ°å±æ€§å€¼&#34;</span><span class="p">)</span>
  <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
  	 <span class="nx">shim</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="s">&#34;æŸ¥è¯¢é”™è¯¯&#34;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">shim</span><span class="p">.</span><span class="nf">Success</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">res</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">//ç±»å‹æ–­è¨€ -----ç”¨æ¥åˆ¤æ–­æ˜¯å¦å½“å‰çš„æ“ä½œç”¨æˆ·çš„attrçš„keyä¸valueæ˜¯å¦ä¸è¿™é‡ŒæŒ‡å®šçš„å€¼åŒ¹é…
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">SmartContract</span><span class="p">)</span><span class="nf">AssertAttr</span><span class="p">(</span><span class="nx">APIstub</span> <span class="nx">shim</span><span class="p">.</span><span class="nx">ChaincodeStubInterface</span><span class="p">)</span> <span class="nx">sc</span><span class="p">.</span><span class="nx">Response</span> <span class="p">{</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">cid</span><span class="p">.</span><span class="nf">AssertAttributeValue</span><span class="p">(</span><span class="nx">APIstub</span><span class="p">,</span> <span class="s">&#34;usertype&#34;</span><span class="p">,</span> <span class="s">&#34;storeshop&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">shim</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="s">&#34;ç±»å‹ä¸æ˜¯storeshop&#34;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">shim</span><span class="p">.</span><span class="nf">Success</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;ç±»å‹æ˜¯storeshop&#34;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><p>æ¼”ç¤ºä¸€ä¸ªåœ¨Java-SDKä¸­é€šè¿‡<code>CID</code>åº“è¿›è¡Œé“¾ç è®¿é—®æ§åˆ¶çš„ä¾‹å­ï¼š</p>
<p>é“¾ç åœ°å€å¦‚ä¸‹ï¼š</p>
<p>fabric-SDK-Javaçš„å®¢æˆ·ç«¯ä»£ç ä¸º:</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">SPDX-License-Identifier: Apache-2.0
</span><span class="cm">*/</span>

<span class="kn">package</span> <span class="nn">org.example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.example.Common.User</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet.Identity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.Enrollment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.security.CryptoSuite</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.security.CryptoSuiteFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.Attribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.EnrollmentRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.HFCAClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.RegistrationRequest</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterUser</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&#34;org.hyperledger.fabric.sdk.service_discovery.as_localhost&#34;</span><span class="o">,</span> <span class="s">&#34;true&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

        <span class="c1">// Create a CA client for interacting with the CA.
</span><span class="c1"></span>        <span class="n">Properties</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;pemFile&#34;</span><span class="o">,</span> <span class="n">EnrollAdmin</span><span class="o">.</span><span class="na">CERTIFICATION_PATH</span><span class="o">);</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;allowAllHostNames&#34;</span><span class="o">,</span> <span class="s">&#34;true&#34;</span><span class="o">);</span>
        <span class="n">HFCAClient</span> <span class="n">caClient</span> <span class="o">=</span> <span class="n">HFCAClient</span><span class="o">.</span><span class="na">createNewInstance</span><span class="o">(</span><span class="n">EnrollAdmin</span><span class="o">.</span><span class="na">PATH_AND_PORT</span><span class="o">,</span> <span class="n">props</span><span class="o">);</span>
        <span class="n">CryptoSuite</span> <span class="n">cryptoSuite</span> <span class="o">=</span> <span class="n">CryptoSuiteFactory</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getCryptoSuite</span><span class="o">();</span>
        <span class="n">caClient</span><span class="o">.</span><span class="na">setCryptoSuite</span><span class="o">(</span><span class="n">cryptoSuite</span><span class="o">);</span>

        <span class="c1">// Create a wallet for managing identities
</span><span class="c1"></span>        <span class="n">Wallet</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">Wallet</span><span class="o">.</span><span class="na">createFileSystemWallet</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;src/main/resources/wallet&#34;</span><span class="o">));</span>

        <span class="c1">// Check to see if we&#39;ve already enrolled the user.
</span><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">userExists</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="s">&#34;songjian&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">userExists</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;An identity for the user \&#34;songjian\&#34; already exists in the wallet&#34;</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">userExists</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">userExists</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;\&#34;admin\&#34; needs to be enrolled and added to the wallet first&#34;</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">Identity</span> <span class="n">adminIdentity</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">);</span>
        <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">sdk</span><span class="o">.</span><span class="na">User</span> <span class="n">admin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">affiliation</span><span class="o">(</span><span class="s">&#34;org1.department1&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">mspId</span><span class="o">(</span><span class="s">&#34;Org1MSP&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">enrollment</span><span class="o">(</span><span class="n">adminIdentity</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>

        <span class="c1">// Register the user, enroll the user, and import the new identity into the wallet.
</span><span class="c1"></span>        <span class="n">RegistrationRequest</span> <span class="n">registrationRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RegistrationRequest</span><span class="o">(</span><span class="s">&#34;songjian&#34;</span><span class="o">);</span>
        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">setAffiliation</span><span class="o">(</span><span class="s">&#34;org1.department1&#34;</span><span class="o">);</span>
        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">setEnrollmentID</span><span class="o">(</span><span class="s">&#34;songjian&#34;</span><span class="o">);</span>

        <span class="c1">//registerçš„æ—¶å€™è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ç±»å‹
</span><span class="c1"></span>        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="k">new</span> <span class="n">Attribute</span><span class="o">(</span><span class="s">&#34;usertype&#34;</span><span class="o">,</span><span class="s">&#34;worker&#34;</span><span class="o">));</span>
        <span class="n">String</span> <span class="n">enrollmentSecret</span> <span class="o">=</span> <span class="n">caClient</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">registrationRequest</span><span class="o">,</span> <span class="n">admin</span><span class="o">);</span>
        <span class="c1">//enrollçš„æ—¶å€™ï¼ŒæŒ‡å®šä¹‹å‰registerçš„ç”¨æˆ·ä¸­çš„å“ªäº›å±æ€§è¦åŠ å…¥åˆ°è¯ä¹¦ä¸­ï¼Œå¦‚æœä¸åŠ ï¼Œåä¹°ä½ åœ¨é“¾ç ä¸­å°±è¯»å–ä¸åˆ°
</span><span class="c1"></span>        <span class="n">EnrollmentRequest</span> <span class="n">enrollmentRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EnrollmentRequest</span><span class="o">();</span>
        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;hf.Affiliation&#34;</span><span class="o">);</span>		<span class="c1">//default attribute
</span><span class="c1"></span>        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;hf.EnrollmentID&#34;</span><span class="o">);</span>	<span class="c1">//default attribute
</span><span class="c1"></span>        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;hf.Type&#34;</span><span class="o">);</span>			<span class="c1">//default attribute
</span><span class="c1"></span>        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;usertype&#34;</span><span class="o">);</span>			<span class="c1">//user-defined attribute
</span><span class="c1"></span>
        <span class="n">Enrollment</span> <span class="n">enrollment</span> <span class="o">=</span> <span class="n">caClient</span><span class="o">.</span><span class="na">enroll</span><span class="o">(</span><span class="s">&#34;songjian&#34;</span><span class="o">,</span> <span class="n">enrollmentSecret</span><span class="o">,</span><span class="n">enrollmentRequest</span><span class="o">);</span>
        <span class="n">Identity</span> <span class="n">user</span> <span class="o">=</span> <span class="n">Identity</span><span class="o">.</span><span class="na">createIdentity</span><span class="o">(</span><span class="s">&#34;Org1MSP&#34;</span><span class="o">,</span> <span class="n">enrollment</span><span class="o">.</span><span class="na">getCert</span><span class="o">(),</span> <span class="n">enrollment</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="n">wallet</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;songjian&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Successfully enrolled user \&#34;songjian\&#34; and imported it into the wallet&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table></div>
</div>
</div><blockquote>
<p>æ³¨æ„ï¼šåœ¨registerä¸­è‡ªå®šä¹‰äº†å±æ€§å€¼ä¹‹åï¼Œéœ€è¦åœ¨æœ€åè¿›è¡ŒEnrollçš„æ—¶å€™ï¼Œå°†ç›¸å…³çš„å±æ€§æ”¾å…¥<code>EnrollmentRequest</code>ä¸­ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åœ¨é“¾ç ä¸­è·å–ä¸åˆ°attributionçš„å±æ€§å€¼ï¼Œæˆ‘è¿™è¾¹å°±æ˜¯Enrollçš„æ—¶å€™æ²¡åŠ ï¼Œå¯¼è‡´æˆ‘ä¸€åº¦æ€€ç–‘è‡ªå·±çš„é“¾ç å‡ºç°äº†é—®é¢˜ï¼Œæœ€åçœ‹åˆ°ç½‘ä¸Šå¤§ä½¬çš„æ‰å‘ç°æ˜¯è¿™æ­¥ä¸å¯¹ï¼Œä¹‹å‰ä½¿ç”¨NodeSDKçš„æ—¶å€™å¥½åƒæ²¡è¿™ä¸ªé—®é¢˜ï¼Œä¼°è®¡æ˜¯SDKä¸åŒpaã€‚ã€‚ã€‚ã€‚ä¹Ÿç®—æ˜¯å­¦åˆ°äº†hh</p>
</blockquote>
<p>è¿™ä¸ªä¾‹å­æƒ³å®ç°çš„å°±æ˜¯ï¼Œfabcarä¸­çš„æ±½è½¦ï¼Œåªæœ‰ç”¨æˆ·å±æ€§ä¸º<code>leader_car_department(æ±½è½¦éƒ¨é—¨ä¸»ç®¡)</code>ç±»å‹çš„æ‰å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„æ±½è½¦å¹¶ä¸”æ›´æ”¹æ±½è½¦çš„æ‰€æœ‰è€…,å…¶ä»–å±æ€§å€¼çš„æ˜¯çœ‹ä¸äº†çš„ï¼Œæ¯”å¦‚æ™®é€šçš„å·¥äºº<code>worker</code></p>
<p>ç”¨æˆ·å±æ€§<code>Attr</code>æˆ‘ä»¬å®šä¹‰ä¸º<code>usertype</code>ï¼Œä½†æ˜¯<code>value</code>çš„å€¼å°±å¯ä»¥æœ‰å¾ˆå¤šäº†ï¼Œæ¯”å¦‚worker(å‘˜å·¥).....è¿˜æœ‰å…¶ä»–çš„ã€‚ã€‚ã€‚</p>
<p>ä¸Šé¢æ˜¯æ³¨å†Œäº†ä¸€ä¸ª<code>Attr</code>ä¸º<code>usertype</code>ï¼Œ<code>value</code>ä¸º<code>worker</code>çš„ç”¨æˆ·<code>songjian</code>ï¼Œæ‰€ä»¥è¿™ä¸ªç”¨æˆ·æ˜¯ä¸èƒ½è°ƒç”¨<code>queryAllCars</code>å’Œ<code>changeCarOwner</code>çš„</p>
<p>ä¸‹é¢æˆ‘ä»¬å†æ³¨å†Œä¸€ä¸ªç”¨æˆ·<code>yfhuang</code>ï¼Œä»–çš„ç±»å‹ä¸º<code>leader_car_department(æ±½è½¦éƒ¨é—¨ä¸»ç®¡)</code>,æ‰€ä»¥å°±å¯ä»¥ä½¿ç”¨<code>queryAllCars</code>å’Œ<code>changeCarOwner</code></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">SPDX-License-Identifier: Apache-2.0
</span><span class="cm">*/</span>

<span class="kn">package</span> <span class="nn">org.example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.example.Common.User</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet.Identity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.Enrollment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.security.CryptoSuite</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.security.CryptoSuiteFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.Attribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.EnrollmentRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.HFCAClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.RegistrationRequest</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterUser</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&#34;org.hyperledger.fabric.sdk.service_discovery.as_localhost&#34;</span><span class="o">,</span> <span class="s">&#34;true&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

        <span class="c1">// Create a CA client for interacting with the CA.
</span><span class="c1"></span>        <span class="n">Properties</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;pemFile&#34;</span><span class="o">,</span> <span class="n">EnrollAdmin</span><span class="o">.</span><span class="na">CERTIFICATION_PATH</span><span class="o">);</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;allowAllHostNames&#34;</span><span class="o">,</span> <span class="s">&#34;true&#34;</span><span class="o">);</span>
        <span class="n">HFCAClient</span> <span class="n">caClient</span> <span class="o">=</span> <span class="n">HFCAClient</span><span class="o">.</span><span class="na">createNewInstance</span><span class="o">(</span><span class="n">EnrollAdmin</span><span class="o">.</span><span class="na">PATH_AND_PORT</span><span class="o">,</span> <span class="n">props</span><span class="o">);</span>
        <span class="n">CryptoSuite</span> <span class="n">cryptoSuite</span> <span class="o">=</span> <span class="n">CryptoSuiteFactory</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getCryptoSuite</span><span class="o">();</span>
        <span class="n">caClient</span><span class="o">.</span><span class="na">setCryptoSuite</span><span class="o">(</span><span class="n">cryptoSuite</span><span class="o">);</span>

        <span class="c1">// Create a wallet for managing identities
</span><span class="c1"></span>        <span class="n">Wallet</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">Wallet</span><span class="o">.</span><span class="na">createFileSystemWallet</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;src/main/resources/wallet&#34;</span><span class="o">));</span>

        <span class="c1">// Check to see if we&#39;ve already enrolled the user.
</span><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">userExists</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="s">&#34;yfhuang&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">userExists</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;An identity for the user \&#34;yfhuang\&#34; already exists in the wallet&#34;</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">userExists</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">userExists</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;\&#34;admin\&#34; needs to be enrolled and added to the wallet first&#34;</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">Identity</span> <span class="n">adminIdentity</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">);</span>
        <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">sdk</span><span class="o">.</span><span class="na">User</span> <span class="n">admin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">affiliation</span><span class="o">(</span><span class="s">&#34;org1.department1&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">mspId</span><span class="o">(</span><span class="s">&#34;Org1MSP&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">enrollment</span><span class="o">(</span><span class="n">adminIdentity</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>

        <span class="c1">// Register the user, enroll the user, and import the new identity into the wallet.
</span><span class="c1"></span>        <span class="n">RegistrationRequest</span> <span class="n">registrationRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RegistrationRequest</span><span class="o">(</span><span class="s">&#34;yfhuang&#34;</span><span class="o">);</span>
        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">setAffiliation</span><span class="o">(</span><span class="s">&#34;org1.department1&#34;</span><span class="o">);</span>
        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">setEnrollmentID</span><span class="o">(</span><span class="s">&#34;yfhuang&#34;</span><span class="o">);</span>

        <span class="c1">//registerçš„æ—¶å€™è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ç±»å‹
</span><span class="c1"></span>        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="k">new</span> <span class="n">Attribute</span><span class="o">(</span><span class="s">&#34;usertype&#34;</span><span class="o">,</span><span class="s">&#34;leader_car_department&#34;</span><span class="o">));</span>

        <span class="n">String</span> <span class="n">enrollmentSecret</span> <span class="o">=</span> <span class="n">caClient</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">registrationRequest</span><span class="o">,</span> <span class="n">admin</span><span class="o">);</span>

        <span class="c1">//enrollçš„æ—¶å€™ï¼ŒæŒ‡å®šä¹‹å‰registerçš„ç”¨æˆ·ä¸­çš„å“ªäº›å±æ€§è¦åŠ å…¥åˆ°è¯ä¹¦ä¸­ï¼Œå¦‚æœä¸åŠ ï¼Œåä¹°ä½ åœ¨é“¾ç ä¸­å°±è¯»å–ä¸åˆ°
</span><span class="c1"></span>        <span class="n">EnrollmentRequest</span> <span class="n">enrollmentRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EnrollmentRequest</span><span class="o">();</span>
        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;hf.Affiliation&#34;</span><span class="o">);</span>		<span class="c1">//default attribute
</span><span class="c1"></span>        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;hf.EnrollmentID&#34;</span><span class="o">);</span>	<span class="c1">//default attribute
</span><span class="c1"></span>        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;hf.Type&#34;</span><span class="o">);</span>			<span class="c1">//default attribute
</span><span class="c1"></span>        <span class="n">enrollmentRequest</span><span class="o">.</span><span class="na">addAttrReq</span><span class="o">(</span><span class="s">&#34;usertype&#34;</span><span class="o">);</span>				<span class="c1">//user-defined attribute
</span><span class="c1"></span>
        <span class="n">Enrollment</span> <span class="n">enrollment</span> <span class="o">=</span> <span class="n">caClient</span><span class="o">.</span><span class="na">enroll</span><span class="o">(</span><span class="s">&#34;yfhuang&#34;</span><span class="o">,</span> <span class="n">enrollmentSecret</span><span class="o">,</span><span class="n">enrollmentRequest</span><span class="o">);</span>
        <span class="n">Identity</span> <span class="n">user</span> <span class="o">=</span> <span class="n">Identity</span><span class="o">.</span><span class="na">createIdentity</span><span class="o">(</span><span class="s">&#34;Org1MSP&#34;</span><span class="o">,</span> <span class="n">enrollment</span><span class="o">.</span><span class="na">getCert</span><span class="o">(),</span> <span class="n">enrollment</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="n">wallet</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;yfhuang&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Successfully enrolled user \&#34;yfhuang\&#34; and imported it into the wallet&#34;</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></td></tr></table></div>
</div>
</div><p>ä»¥<code>yfhuang</code>ç”¨æˆ·è¿›è¡Œè°ƒç”¨</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">org.example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Contract</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Gateway</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Network</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @author csj
</span><span class="cm"> * @date 2020/10/16 - 16:49
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">clientCar</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&#34;org.hyperledger.fabric.sdk.service_discovery.as_localhost&#34;</span><span class="o">,</span> <span class="s">&#34;false&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="c1">// Load a file system based wallet for managing identities.
</span><span class="c1"></span>        <span class="n">Path</span> <span class="n">walletPath</span> <span class="o">=</span> <span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;src/main/resources/wallet&#34;</span><span class="o">);</span>
        <span class="n">Wallet</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">Wallet</span><span class="o">.</span><span class="na">createFileSystemWallet</span><span class="o">(</span><span class="n">walletPath</span><span class="o">);</span>

        <span class="c1">// load a CCP
</span><span class="c1"></span>        <span class="n">Path</span> <span class="n">networkConfigPath</span> <span class="o">=</span> <span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;src/main/resources/connection-org1.yaml&#34;</span><span class="o">);</span>

        <span class="n">Gateway</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">Gateway</span><span class="o">.</span><span class="na">createBuilder</span><span class="o">();</span>
        <span class="n">builder</span><span class="o">.</span><span class="na">identity</span><span class="o">(</span><span class="n">wallet</span><span class="o">,</span> <span class="s">&#34;yfhuang&#34;</span><span class="o">).</span><span class="na">networkConfig</span><span class="o">(</span><span class="n">networkConfigPath</span><span class="o">).</span><span class="na">discovery</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

        <span class="c1">// create a gateway connection
</span><span class="c1"></span>        <span class="k">try</span> <span class="o">(</span><span class="n">Gateway</span> <span class="n">gateway</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">connect</span><span class="o">())</span> <span class="o">{</span>

            <span class="c1">// get the network and contract
</span><span class="c1"></span>            <span class="n">Network</span> <span class="n">network</span> <span class="o">=</span> <span class="n">gateway</span><span class="o">.</span><span class="na">getNetwork</span><span class="o">(</span><span class="s">&#34;mychannel&#34;</span><span class="o">);</span>
            <span class="n">Contract</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="na">getContract</span><span class="o">(</span><span class="s">&#34;fabcar&#34;</span><span class="o">);</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">result</span><span class="o">;</span>
           <span class="c1">//è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯ç”¨æˆ·æ³¨å†Œå±æ€§ä¸ºleader_car_departmentï¼Œå°±ä¼šæŠ›å‡ºæ²¡æœ‰æƒé™çš„é”™è¯¯
</span><span class="c1"></span>            <span class="n">result</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="na">evaluateTransaction</span><span class="o">(</span><span class="s">&#34;queryAllCars&#34;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">result</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table></div>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å¯ä»¥æŸ¥çœ‹åˆ°æ‰€æœ‰çš„æ±½è½¦çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="o">[{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR0&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;blue&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Toyota&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Prius&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Tomoko&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR1&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;red&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Ford&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Mustang&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Brad&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR2&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;green&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Hyundai&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Tucson&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Jin Soo&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR3&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;yellow&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Volkswagen&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Passat&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Max&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR4&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;black&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Tesla&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;S&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Adriana&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR5&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;purple&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Peugeot&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;205&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Michel&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR6&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;white&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Chery&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;S22L&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Aarav&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR7&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;violet&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Fiat&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Punto&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Pari&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR8&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;indigo&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Tata&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Nano&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Valeria&#34;</span><span class="o">}},{</span><span class="s">&#34;Key&#34;</span><span class="o">:</span><span class="s">&#34;CAR9&#34;</span><span class="o">,</span> <span class="s">&#34;Record&#34;</span><span class="o">:{</span><span class="s">&#34;colour&#34;</span><span class="o">:</span><span class="s">&#34;brown&#34;</span><span class="o">,</span><span class="s">&#34;make&#34;</span><span class="o">:</span><span class="s">&#34;Holden&#34;</span><span class="o">,</span><span class="s">&#34;model&#34;</span><span class="o">:</span><span class="s">&#34;Barina&#34;</span><span class="o">,</span><span class="s">&#34;owner&#34;</span><span class="o">:</span><span class="s">&#34;Shotaro&#34;</span><span class="o">}}]</span>
</code></pre></td></tr></table></div>
</div>
</div><p>ä»¥<code>songjian</code>ç”¨æˆ·è¿›è¡Œè°ƒç”¨ï¼š</p>
<p>å¯ä»¥çœ‹åˆ°çˆ†å‡ºäº†æƒé™é”™è¯¯</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Exception</span> <span class="n">in</span> <span class="n">thread</span> <span class="s">&#34;main&#34;</span> <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">gateway</span><span class="o">.</span><span class="na">ContractException</span><span class="o">:</span> <span class="n">æ²¡æœ‰æƒé™</span>
	<span class="n">at</span> <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">gateway</span><span class="o">.</span><span class="na">impl</span><span class="o">.</span><span class="na">SingleQueryHandler</span><span class="o">.</span><span class="na">evaluate</span><span class="o">(</span><span class="n">SingleQueryHandler</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="n">50</span><span class="o">)</span>
	<span class="n">at</span> <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">gateway</span><span class="o">.</span><span class="na">impl</span><span class="o">.</span><span class="na">TransactionImpl</span><span class="o">.</span><span class="na">evaluate</span><span class="o">(</span><span class="n">TransactionImpl</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="n">213</span><span class="o">)</span>
	<span class="n">at</span> <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">gateway</span><span class="o">.</span><span class="na">impl</span><span class="o">.</span><span class="na">ContractImpl</span><span class="o">.</span><span class="na">evaluateTransaction</span><span class="o">(</span><span class="n">ContractImpl</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="n">55</span><span class="o">)</span>
	<span class="n">at</span> <span class="n">org</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">clientCar</span><span class="o">.</span><span class="na">main</span><span class="o">(</span><span class="n">clientCar</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="n">43</span><span class="o">)</span>

<span class="n">Process</span> <span class="n">finished</span> <span class="n">with</span> <span class="n">exit</span> <span class="n">code</span> <span class="n">1</span>
</code></pre></td></tr></table></div>
</div>
</div><p>æ‰€ä»¥ï¼ŒåŸºäºé“¾ç çš„è®¿é—®æ§åˆ¶å°±å®Œæˆäº†</p>
<hr>
<p>æœ€åä¸€ä¸ªå°tipsï¼š</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨opensslå·¥å…·æ¥æŸ¥çœ‹æˆ‘ä»¬çš„è¯ä¹¦æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨SDKè¿›è¡Œæ³¨å†Œç”¨æˆ·ä¹‹åï¼Œä¼šåœ¨ç›¸å…³çš„æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ç§é’¥æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯jsonç±»å‹çš„ä¸€ä¸ªæ–‡ä»¶(å…¶ä¸­æœ‰ç”¨æˆ·çš„è¯ä¹¦certification),å°†è¯ä¹¦ç²˜è´´åˆ°æ–°å»ºçš„pemæ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨spensslå·¥å…·å°†ä¸¤ä¸ªç”¨æˆ·çš„è¯ä¹¦è½¬æ¢æˆæ–‡æœ¬å½¢å¼</p>
<ul>
<li><code>songjian</code>ç”¨æˆ·çš„è¯ä¹¦</li>
</ul>
<pre><code>-----BEGIN CERTIFICATE-----
MIICqTCCAk+gAwIBAgIUe7kl1iz7AC+JiI4V+GQSFMXh79gwCgYIKoZIzj0EAwIw
czELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh
biBGcmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMT
E2NhLm9yZzEuZXhhbXBsZS5jb20wHhcNMjAxMDE2MTAwMzAwWhcNMjExMDE2MTAw
ODAwWjBFMTAwDQYDVQQLEwZjbGllbnQwCwYDVQQLEwRvcmcxMBIGA1UECxMLZGVw
YXJ0bWVudDExETAPBgNVBAMTCHNvbmdqaWFuMFkwEwYHKoZIzj0CAQYIKoZIzj0D
AQcDQgAEwbOP5V6+LAQN7FLLeR0sNXIWmyG09TfE434e/7bbi/mJs4c1n6/8h3Ix
KCE3DOQwiH5EbHNuSa3j8XaFPIWE46OB7jCB6zAOBgNVHQ8BAf8EBAMCB4AwDAYD
VR0TAQH/BAIwADAdBgNVHQ4EFgQUixJa/Mionju24JKEGYwytn0rasIwKwYDVR0j
BCQwIoAgKIGbpvymakg5F6IFyeRvFQKplozygNldEr5VdR3Kc1QwfwYIKgMEBQYH
CAEEc3siYXR0cnMiOnsiaGYuQWZmaWxpYXRpb24iOiJvcmcxLmRlcGFydG1lbnQx
IiwiaGYuRW5yb2xsbWVudElEIjoic29uZ2ppYW4iLCJoZi5UeXBlIjoiY2xpZW50
IiwidXNlcnR5cGUiOiJ3b3JrZXIifX0wCgYIKoZIzj0EAwIDSAAwRQIhAKr6NRaL
aGC+NC8AWiVR6KqIbL3+A2y0tMPYP/NvsRFcAiAEB8nCmpRjYXTvekctqTtKtykL
utw3qJfW7wCFhnp8VQ==
-----END CERTIFICATE-----
</code></pre><p>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">openssl x509 -in songjian.pem -noout -text
</code></pre></td></tr></table></div>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            7b:b9:25:d6:2c:fb:00:2f:89:88:8e:15:f8:64:12:14:c5:e1:ef:d8
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = US, ST = California, L = San Francisco, O = org1.example.com, CN = ca.org1.example.com
        Validity
            Not Before: Oct 16 10:03:00 2020 GMT
            Not After : Oct 16 10:08:00 2021 GMT
        Subject: OU = client + OU = org1 + OU = department1, CN = songjian
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:c1:b3:8f:e5:5e:be:2c:04:0d:ec:52:cb:79:1d:
                    2c:35:72:16:9b:21:b4:f5:37:c4:e3:7e:1e:ff:b6:
                    db:8b:f9:89:b3:87:35:9f:af:fc:87:72:31:28:21:
                    37:0c:e4:30:88:7e:44:6c:73:6e:49:ad:e3:f1:76:
                    85:3c:85:84:e3
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                8B:12:5A:FC:C8:A8:9E:3B:B6:E0:92:84:19:8C:32:B6:7D:2B:6A:C2
            X509v3 Authority Key Identifier:
                keyid:28:81:9B:A6:FC:A6:6A:48:39:17:A2:05:C9:E4:6F:15:02:A9:96:8C:F2:80:D9:5D:12:BE:55:75:1D:CA:73:54

            1.2.3.4.5.6.7.8.1:
                {&#34;attrs&#34;:{&#34;hf.Affiliation&#34;:&#34;org1.department1&#34;,&#34;hf.EnrollmentID&#34;:&#34;songjian&#34;,&#34;hf.Type&#34;:&#34;client&#34;,&#34;usertype&#34;:&#34;worker&#34;}}
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:aa:fa:35:16:8b:68:60:be:34:2f:00:5a:25:
         51:e8:aa:88:6c:bd:fe:03:6c:b4:b4:c3:d8:3f:f3:6f:b1:11:
         5c:02:20:04:07:c9:c2:9a:94:63:61:74:ef:7a:47:2d:a9:3b:
         4a:b7:29:0b:ba:dc:37:a8:97:d6:ef:00:85:86:7a:7c:55
</code></pre></td></tr></table></div>
</div>
</div><ul>
<li><code>yfhuang</code>çš„è¯ä¹¦</li>
</ul>
<pre><code>-----BEGIN CERTIFICATE-----
MIICuDCCAl6gAwIBAgIULUajiYT7HTD8cJT7HHMKC9Vm7yswCgYIKoZIzj0EAwIw
czELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh
biBGcmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMT
E2NhLm9yZzEuZXhhbXBsZS5jb20wHhcNMjAxMDE2MTAwMzAwWhcNMjExMDE2MTAw
ODAwWjBEMTAwDQYDVQQLEwZjbGllbnQwCwYDVQQLEwRvcmcxMBIGA1UECxMLZGVw
YXJ0bWVudDExEDAOBgNVBAMTB3lmaHVhbmcwWTATBgcqhkjOPQIBBggqhkjOPQMB
BwNCAATrR6GhF0ZUBqvM2suH8GN1qVnFCCXq9gZV4iPkcTLufwKij0zVDdw1/uM7
RsPcEYtBGv4ofRW9UErmST58XynKo4H+MIH7MA4GA1UdDwEB/wQEAwIHgDAMBgNV
HRMBAf8EAjAAMB0GA1UdDgQWBBSglzSxtWdYHuCT/DWwmBaF1i+phjArBgNVHSME
JDAigCAogZum/KZqSDkXogXJ5G8VAqmWjPKA2V0SvlV1HcpzVDCBjgYIKgMEBQYH
CAEEgYF7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBhcnRtZW50
MSIsImhmLkVucm9sbG1lbnRJRCI6InlmaHVhbmciLCJoZi5UeXBlIjoiY2xpZW50
IiwidXNlcnR5cGUiOiJsZWFkZXJfY2FyX2RlcGFydG1lbnQifX0wCgYIKoZIzj0E
AwIDSAAwRQIhAKUSaUMnkbvZOaPCPnzW1FxVVJMJMRepFTgCQ9Eog80bAiBKoPHL
IJzGv2uVMmt47P+ydhm1Sw+nLHUJ1CjB7PKVgQ==
-----END CERTIFICATE-----
</code></pre><p>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">openssl x509 -in yfhuang.pem -noout -text
</code></pre></td></tr></table></div>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            2d:46:a3:89:84:fb:1d:30:fc:70:94:fb:1c:73:0a:0b:d5:66:ef:2b
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = US, ST = California, L = San Francisco, O = org1.example.com, CN = ca.org1.example.com
        Validity
            Not Before: Oct 16 10:03:00 2020 GMT
            Not After : Oct 16 10:08:00 2021 GMT
        Subject: OU = client + OU = org1 + OU = department1, CN = yfhuang
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:eb:47:a1:a1:17:46:54:06ğŸ†cc:da:cb:87:f0:
                    63:75:a9:59:c5:08:25:ea:f6:06:55:e2:23:e4:71:
                    32:ee:7f:02:a2:8f:4c:d5:0d:dc:35:fe:e3:3b:46:
                    c3:dc:11:8b:41:1a:fe:28:7d:15:bd:50:4a:e6:49:
                    3e:7c:5f:29:ca
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                A0:97:34:B1:B5:67:58:1E:E0:93:FC:35:B0:98:16:85:D6:2F:A9:86
            X509v3 Authority Key Identifier:
                keyid:28:81:9B:A6:FC:A6:6A:48:39:17:A2:05:C9:E4:6F:15:02:A9:96:8C:F2:80:D9:5D:12:BE:55:75:1D:CA:73:54

            1.2.3.4.5.6.7.8.1:
                {&#34;attrs&#34;:{&#34;hf.Affiliation&#34;:&#34;org1.department1&#34;,&#34;hf.EnrollmentID&#34;:&#34;yfhuang&#34;,&#34;hf.Type&#34;:&#34;client&#34;,&#34;usertype&#34;:&#34;leader_car_department&#34;}}
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:a5:12:69:43:27:91:bb:d9:39:a3:c2:3e:7c:
         d6:d4:5c:55:54:93:09:31:17:a9:15:38:02:43:d1:28:83ğŸ’¿
         1b:02:20:4a:a0:f1:cb:20:9c:c6:bf:6b:95:32:6b:78:ec:ff:
         b2:76:19:b5:4b:0f:a7:2c:75:09:d4:28:c1:ec:f2:95:81
PS C:\Users\Bun\Desktop&gt; openssl x509 -in songjian.pem -noout -text
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            7b:b9:25:d6:2c:fb:00:2f:89:88:8e:15:f8:64:12:14:c5:e1:ef:d8
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = US, ST = California, L = San Francisco, O = org1.example.com, CN = ca.org1.example.com
        Validity
            Not Before: Oct 16 10:03:00 2020 GMT
        Subject: OU = client + OU = org1 + OU = department1, CN = songjian
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:c1:b3:8f:e5:5e:be:2c:04:0d:ec:52:cb:79:1d:
                    2c:35:72:16:9b:21:b4:f5:37:c4:e3:7e:1e:ff:b6:
                    db:8b:f9:89:b3:87:35:9f:af:fc:87:72:31:28:21:
                    37:0c:e4:30:88:7e:44:6c:73:6e:49:ad:e3:f1:76:
                    85:3c:85:84:e3
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                8B:12:5A:FC:C8:A8:9E:3B:B6:E0:92:84:19:8C:32:B6:7D:2B:6A:C2
            X509v3 Authority Key Identifier:
                keyid:28:81:9B:A6:FC:A6:6A:48:39:17:A2:05:C9:E4:6F:15:02:A9:96:8C:F2:80:D9:5D:12:BE:55:75:1D:CA:73:54

            1.2.3.4.5.6.7.8.1:
                {&#34;attrs&#34;:{&#34;hf.Affiliation&#34;:&#34;org1.department1&#34;,&#34;hf.EnrollmentID&#34;:&#34;songjian&#34;,&#34;hf.Type&#34;:&#34;client&#34;,&#34;usertype&#34;:&#34;worker&#34;}}
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:aa:fa:35:16:8b:68:60:be:34:2f:00:5a:25:
         51:e8:aa:88:6c:bd:fe:03:6c:b4:b4:c3:d8:3f:f3:6f:b1:11:
         5c:02:20:04:07:c9:c2:9a:94:63:61:74:ef:7a:47:2d:a9:3b:
         4a:b7:29:0b:ba:dc:37:a8:97:d6:ef:00:85:86:7a:7c:55
PS C:\Users\Bun\Desktop&gt; openssl x509 -in yfhuang.pem -noout -text
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            2d:46:a3:89:84:fb:1d:30:fc:70:94:fb:1c:73:0a:0b:d5:66:ef:2b
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = US, ST = California, L = San Francisco, O = org1.example.com, CN = ca.org1.example.com
        Validity
            Not Before: Oct 16 10:03:00 2020 GMT
            Not After : Oct 16 10:08:00 2021 GMT
        Subject: OU = client + OU = org1 + OU = department1, CN = yfhuang
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:eb:47:a1:a1:17:46:54:06ğŸ†cc:da:cb:87:f0:
                    63:75:a9:59:c5:08:25:ea:f6:06:55:e2:23:e4:71:
                    32:ee:7f:02:a2:8f:4c:d5:0d:dc:35:fe:e3:3b:46:
                    c3:dc:11:8b:41:1a:fe:28:7d:15:bd:50:4a:e6:49:
                    3e:7c:5f:29:ca
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                A0:97:34:B1:B5:67:58:1E:E0:93:FC:35:B0:98:16:85:D6:2F:A9:86
            X509v3 Authority Key Identifier:
                keyid:28:81:9B:A6:FC:A6:6A:48:39:17:A2:05:C9:E4:6F:15:02:A9:96:8C:F2:80:D9:5D:12:BE:55:75:1D:CA:73:54

            1.2.3.4.5.6.7.8.1:
                {&#34;attrs&#34;:{&#34;hf.Affiliation&#34;:&#34;org1.department1&#34;,&#34;hf.EnrollmentID&#34;:&#34;yfhuang&#34;,&#34;hf.Type&#34;:&#34;client&#34;,&#34;usertype&#34;:&#34;leader_car_department&#34;}}
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:a5:12:69:43:27:91:bb:d9:39:a3:c2:3e:7c:
         d6:d4:5c:55:54:93:09:31:17:a9:15:38:02:43:d1:28:83ğŸ’¿
         1b:02:20:4a:a0:f1:cb:20:9c:c6:bf:6b:95:32:6b:78:ec:ff:
         b2:76:19:b5:4b:0f:a7:2c:75:09:d4:28:c1:ec:f2:95:81
</code></pre></td></tr></table></div>
</div>
</div><p>å¯ä»¥è§‚å¯Ÿåˆ°ä¸Šé¢ä¸¤ä¸ªè¯ä¹¦è½¬æ¢ä¹‹åçš„æ–‡æœ¬ä¸­æœ€åçš„attrsä¸­çš„usertypeæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜ï¼Œæˆ‘ä»¬çš„usertypeå·²ç»enrollåˆ°è¯ä¹¦ä¸­äº†ï¼Œä¹Ÿå°±èƒ½åœ¨é“¾ç ä¸­è¯»å–äº†</p>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªåœ¨æ³¨å†Œç”¨æˆ·çš„æ—¶å€™Enrollçš„æ—¶å€™æ²¡æœ‰æŒ‡å®šå°†è‡ªå®šä¹‰çš„å±æ€§åŠ å…¥è¯ä¹¦çš„ä¾‹å­(æ³¨æ„ä¸€ä¸ªhahaç”¨æˆ·)</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">SPDX-License-Identifier: Apache-2.0
</span><span class="cm">*/</span>

<span class="kn">package</span> <span class="nn">org.example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.example.Common.User</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.gateway.Wallet.Identity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.Enrollment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.security.CryptoSuite</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric.sdk.security.CryptoSuiteFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.Attribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.EnrollmentRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.HFCAClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hyperledger.fabric_ca.sdk.RegistrationRequest</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterUser</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&#34;org.hyperledger.fabric.sdk.service_discovery.as_localhost&#34;</span><span class="o">,</span> <span class="s">&#34;true&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="c1">// Create a CA client for interacting with the CA.
</span><span class="c1"></span>        <span class="n">Properties</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;pemFile&#34;</span><span class="o">,</span> <span class="n">EnrollAdmin</span><span class="o">.</span><span class="na">CERTIFICATION_PATH</span><span class="o">);</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;allowAllHostNames&#34;</span><span class="o">,</span> <span class="s">&#34;true&#34;</span><span class="o">);</span>
        <span class="n">HFCAClient</span> <span class="n">caClient</span> <span class="o">=</span> <span class="n">HFCAClient</span><span class="o">.</span><span class="na">createNewInstance</span><span class="o">(</span><span class="n">EnrollAdmin</span><span class="o">.</span><span class="na">PATH_AND_PORT</span><span class="o">,</span> <span class="n">props</span><span class="o">);</span>
        <span class="n">CryptoSuite</span> <span class="n">cryptoSuite</span> <span class="o">=</span> <span class="n">CryptoSuiteFactory</span><span class="o">.</span><span class="na">getDefault</span><span class="o">().</span><span class="na">getCryptoSuite</span><span class="o">();</span>
        <span class="n">caClient</span><span class="o">.</span><span class="na">setCryptoSuite</span><span class="o">(</span><span class="n">cryptoSuite</span><span class="o">);</span>

        <span class="c1">// Create a wallet for managing identities
</span><span class="c1"></span>        <span class="n">Wallet</span> <span class="n">wallet</span> <span class="o">=</span> <span class="n">Wallet</span><span class="o">.</span><span class="na">createFileSystemWallet</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;src/main/resources/wallet&#34;</span><span class="o">));</span>

        <span class="c1">// Check to see if we&#39;ve already enrolled the user.
</span><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">userExists</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="s">&#34;haha&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">userExists</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;An identity for the user \&#34;haha\&#34; already exists in the wallet&#34;</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">userExists</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">userExists</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;\&#34;admin\&#34; needs to be enrolled and added to the wallet first&#34;</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">Identity</span> <span class="n">adminIdentity</span> <span class="o">=</span> <span class="n">wallet</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">);</span>
        <span class="n">org</span><span class="o">.</span><span class="na">hyperledger</span><span class="o">.</span><span class="na">fabric</span><span class="o">.</span><span class="na">sdk</span><span class="o">.</span><span class="na">User</span> <span class="n">admin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">affiliation</span><span class="o">(</span><span class="s">&#34;org1.department1&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">mspId</span><span class="o">(</span><span class="s">&#34;Org1MSP&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">enrollment</span><span class="o">(</span><span class="n">adminIdentity</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">RegistrationRequest</span> <span class="n">registrationRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RegistrationRequest</span><span class="o">(</span><span class="s">&#34;haha&#34;</span><span class="o">);</span>
        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">setAffiliation</span><span class="o">(</span><span class="s">&#34;org1.department1&#34;</span><span class="o">);</span>
        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">setEnrollmentID</span><span class="o">(</span><span class="s">&#34;haha&#34;</span><span class="o">);</span>
        <span class="c1">//registerçš„æ—¶å€™è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ç±»å‹
</span><span class="c1"></span>        <span class="n">registrationRequest</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="k">new</span> <span class="n">Attribute</span><span class="o">(</span><span class="s">&#34;usertype&#34;</span><span class="o">,</span><span class="s">&#34;leader_car_department&#34;</span><span class="o">));</span>
        <span class="n">String</span> <span class="n">enrollmentSecret</span> <span class="o">=</span> <span class="n">caClient</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">registrationRequest</span><span class="o">,</span> <span class="n">admin</span><span class="o">);</span>
        <span class="n">Enrollment</span> <span class="n">enrollment</span> <span class="o">=</span> <span class="n">caClient</span><span class="o">.</span><span class="na">enroll</span><span class="o">(</span><span class="s">&#34;haha&#34;</span><span class="o">,</span> <span class="n">enrollmentSecret</span><span class="o">);</span>
        <span class="n">Identity</span> <span class="n">user</span> <span class="o">=</span> <span class="n">Identity</span><span class="o">.</span><span class="na">createIdentity</span><span class="o">(</span><span class="s">&#34;Org1MSP&#34;</span><span class="o">,</span> <span class="n">enrollment</span><span class="o">.</span><span class="na">getCert</span><span class="o">(),</span> <span class="n">enrollment</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="n">wallet</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;haha&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Successfully enrolled user \&#34;haha\&#34; and imported it into the wallet&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table></div>
</div>
</div><p>ä¸‹é¢æ˜¯è¿™ä¸ªç”¨æˆ·çš„è¯ä¹¦ï¼š</p>
<pre><code>-----BEGIN CERTIFICATE-----
MIICjDCCAjOgAwIBAgIUJrH6/14VpN4DZAG/b3H7TwFxm0wwCgYIKoZIzj0EAwIw
czELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh
biBGcmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMT
E2NhLm9yZzEuZXhhbXBsZS5jb20wHhcNMjAxMDE2MTEwMzAwWhcNMjExMDE2MTEw
ODAwWjBBMTAwDQYDVQQLEwZjbGllbnQwCwYDVQQLEwRvcmcxMBIGA1UECxMLZGVw
YXJ0bWVudDExDTALBgNVBAMTBGhhaGEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC
AATSOOKZ0tB7IRD97e+G8Rbka058hcLr+euj1WHNLipOOKeBvLFocCKMML2dL8hP
2mkndM1zj00YAkVP8yTwO97zo4HWMIHTMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB
Af8EAjAAMB0GA1UdDgQWBBSuIp0UQPrfvmgbJ5iNhOZUh2e/1zArBgNVHSMEJDAi
gCAogZum/KZqSDkXogXJ5G8VAqmWjPKA2V0SvlV1HcpzVDBnBggqAwQFBgcIAQRb
eyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVwYXJ0bWVudDEiLCJo
Zi5FbnJvbGxtZW50SUQiOiJoYWhhIiwiaGYuVHlwZSI6ImNsaWVudCJ9fTAKBggq
hkjOPQQDAgNHADBEAiAYderD2wOsojvdK5k1zYyDLtK73KIYLS5dim02Oz3+BQIg
DjZ1y7kctNRyWJ3uXPJlZWISnwD3fpzp8QccIKE5bUY=
-----END CERTIFICATE-----
</code></pre><p>ä½¿ç”¨opensslå·¥å…·ï¼Œæ‰§è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">openssl x509 -in haha.pem -noout -text
</code></pre></td></tr></table></div>
</div>
</div><p>è½¬æ¢å¾—åˆ°æ–‡æœ¬</p>
<pre><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            26:b1:fa:ff:5e:15:a4ğŸ‡©ğŸ‡ª03:64:01:bf:6f:71:fb:4f:01:71:9b:4c
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = US, ST = California, L = San Francisco, O = org1.example.com, CN = ca.org1.example.com
        Validity
            Not Before: Oct 16 11:03:00 2020 GMT
            Not After : Oct 16 11:08:00 2021 GMT
        Subject: OU = client + OU = org1 + OU = department1, CN = haha
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:d2:38:e2:99:d2:d0:7b:21:10:fd:ed:ef:86:f1:
                    16:e4:6b:4e:7c:85:c2:eb:f9:eb:a3:d5:61ğŸ’¿2e:
                    2a:4e:38:a7:81:bc:b1:68:70:22:8c:30:bd:9d:2f:
                    c8:4f:da:69:27:74:cd:73:8f:4d:18:02:45:4f:f3:
                    24:f0:3bğŸ‡©ğŸ‡ªf3
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                AE:22:9D:14:40:FA:DF:BE:68:1B:27:98:8D:84:E6:54:87:67:BF:D7
            X509v3 Authority Key Identifier:
                keyid:28:81:9B:A6:FC:A6:6A:48:39:17:A2:05:C9:E4:6F:15:02:A9:96:8C:F2:80:D9:5D:12:BE:55:75:1D:CA:73:54

            1.2.3.4.5.6.7.8.1:
                {&quot;attrs&quot;:{&quot;hf.Affiliation&quot;:&quot;org1.department1&quot;,&quot;hf.EnrollmentID&quot;:&quot;haha&quot;,&quot;hf.Type&quot;:&quot;client&quot;}}
    Signature Algorithm: ecdsa-with-SHA256
         30:44:02:20:18:75:ea:c3:db:03:ac:a2:3b:dd:2b:99:35ğŸ’¿
         8c:83:2e:d2:bb:dc:a2:18:2d:2e:5d:8a:6d:36:3b:3d:fe:05:
         02:20:0e:36:75:cb:b9:1c:b4:d4:72:58:9d:ee:5c:f2:65:65:
         62:12:9f:00:f7:7e:9c:e9:f1:07:1c:20:a1:39:6d:46
</code></pre><p>å¯ä»¥çœ‹åˆ°attrsä¸­å¹¶æ²¡æœ‰åŠ å…¥usertype</p>
</blockquote>
<p>å½“ç„¶é“¾ç çš„æ§åˆ¶è¿˜å¯ä»¥ä½¿ç”¨æ–­è¨€çš„æ–¹å¼è¿›è¡Œ</p>
<p>å¥½äº†ï¼Œå¤§åŠŸå‘Šæˆï¼ï¼ï¼ï¼</p>

            </div>

        </article>

        

        
    
    
        <ul class="post-copyright">
            <li class="copyright-item author"><span class="copyright-item-text">ä½œè€…</span>ï¼š<a href="https://VegeBun-csj.github.io" target="_blank" rel="noopener">Bun</a></li>
            
                
                
                
                
                <li class="copyright-item link"><span class="copyright-item-text">é“¾æ¥</span>ï¼š<a href="/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/" target="_blank" rel="noopener">https://VegeBun-csj.github.io/posts/chaincodeå¼€å‘/cidé“¾ç è®¿é—®æ§åˆ¶åº“/</a></li>
            
            <li class="copyright-item license"><span class="copyright-item-text">è®¸å¯</span>ï¼š<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></li>
            
        </ul>
    



        
    <div class="updated-badge-container">
        <span title="Updated @ 2020-10-16 19:30:45 CST" style="cursor:help">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2020-10-16</text><text x="915" y="140" textLength="650" transform="scale(.1)">2020-10-16</text></g></svg>
        </span></div>



        


        <div class="post-share">

        

        <div class="share-items">

            
                <div class="share-item twitter">
                    
                    <a href="https://twitter.com/share?url=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;text=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29&amp;hashtags=%e5%8c%ba%e5%9d%97%e9%93%be,golang,&amp;via=bun" title="åˆ†äº«åˆ°ã€ŒTwitterã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon twitter-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a>
                </div>
            

            
                <div class="share-item facebook">
                    
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;hashtag=%23%e5%8c%ba%e5%9d%97%e9%93%be" title="åˆ†äº«åˆ°ã€ŒFacebookã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon facebook-icon"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></a>
                </div>
            

            
                <div class="share-item linkedin">
                    
                    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;title=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29&amp;summary=Client%20Identity%20Chaincode%20Library%ef%bc%88%e5%ae%a2%e6%88%b7%e7%ab%af%e6%a0%87%e8%af%86%e9%93%be%e4%bb%a3%e7%a0%81%e5%ba%93%ef%bc%89%20The%20client%20identity%20chaincode%20library%20enables%20you%20to%20write%20chaincode%20which%20makes%20access%20control%20decisions%20based%20on%20the%20identity%20of%20the%e2%80%a6%e2%80%a6&amp;source=VegeBun-csj%e2%80%99s%20blog" title="åˆ†äº«åˆ°ã€ŒLinkedInã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon linkedin-icon"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></a>
                </div>
            

            
                <div class="share-item telegram">
                    
                    <a href="https://t.me/share/url?url=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;text=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29" title="åˆ†äº«åˆ°ã€ŒTelegramã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon telegram-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a>
                </div>
            

            
                <div class="share-item weibo">
                    
                    <a href="https://service.weibo.com/share/share.php?&amp;url=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;title=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29&amp;pic=https://VegeBun-csj.github.io/icons/apple-touch-icon.png&amp;searchPic=false" title="åˆ†äº«åˆ°ã€Œæ–°æµªå¾®åšã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon weibo-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a>
                </div>
            

            
                <div class="share-item douban">
                    
                    <a href="https://www.douban.com/share/service?href=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;name=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29&amp;text=Client%20Identity%20Chaincode%20Library%ef%bc%88%e5%ae%a2%e6%88%b7%e7%ab%af%e6%a0%87%e8%af%86%e9%93%be%e4%bb%a3%e7%a0%81%e5%ba%93%ef%bc%89%20The%20client%20identity%20chaincode%20library%20enables%20you%20to%20write%20chaincode%20which%20makes%20access%20control%20decisions%20based%20on%20the%20identity%20of%20the%e2%80%a6%e2%80%a6" title="åˆ†äº«åˆ°ã€Œè±†ç“£ã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon douban-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412l-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952 0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03Z"/></svg></a>
                </div>
            

            
                <div class="share-item qq">
                    
                    <a href="https://connect.qq.com/widget/shareqq/index.html?url=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;title=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29&amp;summary=Client%20Identity%20Chaincode%20Library%ef%bc%88%e5%ae%a2%e6%88%b7%e7%ab%af%e6%a0%87%e8%af%86%e9%93%be%e4%bb%a3%e7%a0%81%e5%ba%93%ef%bc%89%20The%20client%20identity%20chaincode%20library%20enables%20you%20to%20write%20chaincode%20which%20makes%20access%20control%20decisions%20based%20on%20the%20identity%20of%20the%e2%80%a6%e2%80%a6&amp;pics=https://VegeBun-csj.github.io/icons/apple-touch-icon.png&amp;site=VegeBun-csj%e2%80%99s%20blog" title="åˆ†äº«åˆ°ã€ŒQQã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qq-icon"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a>
                </div>
            

            
                <div class="share-item qzone">
                    
                    <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://VegeBun-csj.github.io/posts/chaincode%E5%BC%80%E5%8F%91/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93/&amp;title=%e9%93%be%e7%a0%81%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%28cid%e5%ba%93%29&amp;summary=Client%20Identity%20Chaincode%20Library%ef%bc%88%e5%ae%a2%e6%88%b7%e7%ab%af%e6%a0%87%e8%af%86%e9%93%be%e4%bb%a3%e7%a0%81%e5%ba%93%ef%bc%89%20The%20client%20identity%20chaincode%20library%20enables%20you%20to%20write%20chaincode%20which%20makes%20access%20control%20decisions%20based%20on%20the%20identity%20of%20the%e2%80%a6%e2%80%a6&amp;pics=https://VegeBun-csj.github.io/icons/apple-touch-icon.png&amp;site=VegeBun-csj%e2%80%99s%20blog" title="åˆ†äº«åˆ°ã€ŒQQ ç©ºé—´ã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon qzone-icon"><path d="M23.985 9.202c-.032-.099-.127-.223-.334-.258-.207-.036-7.351-1.406-7.351-1.406s-.105-.022-.198-.07c-.092-.047-.127-.167-.127-.167S12.447.956 12.349.77C12.25.583 12.104.532 12 .532c-.104 0-.251.051-.349.238-.098.186-3.626 6.531-3.626 6.531s-.035.12-.128.167c-.092.047-.197.07-.197.07S.556 8.908.348 8.943c-.208.036-.302.16-.333.258a.477.477 0 0 0 .125.449l5.362 5.49s.072.08.119.172c.016.104.005.21.005.21s-1.189 7.242-1.22 7.45.075.369.159.43c.083.062.233.106.421.013.189-.093 6.812-3.261 6.812-3.261s.098-.044.201-.061c.103-.017.201.061.201.061s6.623 3.168 6.812 3.261c.188.094.338.049.421-.013a.463.463 0 0 0 .159-.43c-.021-.14-.93-5.677-.93-5.677.876-.54 1.425-1.039 1.849-1.747-2.594.969-6.006 1.717-9.415 1.866-.915.041-2.41.097-3.473-.015-.678-.071-1.17-.144-1.243-.438-.053-.215.054-.46.545-.831a2640.5 2640.5 0 0 1 2.861-2.155c1.285-.968 3.559-2.47 3.559-2.731 0-.285-2.144-.781-4.037-.781-1.945 0-2.275.132-2.811.168-.488.034-.769.005-.804-.138-.06-.248.183-.389.588-.568.709-.314 1.86-.594 1.984-.626.194-.052 3.082-.805 5.618-.535 1.318.14 3.244.668 3.244 1.276 0 .342-1.721 1.494-3.225 2.597-1.149.843-2.217 1.561-2.217 1.688 0 .342 3.533 1.241 6.689 1.01l.003-.022c.048-.092.119-.172.119-.172l5.362-5.49a.477.477 0 0 0 .127-.449z"/></svg></a>
                </div>
            

            
                <div class="share-item qrcode">
                    <div class="qrcode-container" title="é€šè¿‡ã€ŒäºŒç»´ç ã€"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qrcode-icon"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"/></svg><div id="qrcode-img"></div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>

<script>
    var typeNumber = 0;
    var errorCorrectionLevel = 'L';
    var qr = qrcode(typeNumber, errorCorrectionLevel);
    qr.addData('https:\/\/VegeBun-csj.github.io\/posts\/chaincode%E5%BC%80%E5%8F%91\/cid%E9%93%BE%E7%A0%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%BA%93\/');
    qr.make();
    document.getElementById('qrcode-img').innerHTML = qr.createImgTag();
</script>

                </div>
            

        </div>

    </div>




        
    
    
        <div class="related-posts">
            <h2 class="related-title">ç›¸å…³æ–‡ç« ï¼š<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
            <ul class="related-list">
                
                    <li class="related-item">
                        <a href="/posts/chaincode%E5%BC%80%E5%8F%91/%E9%93%BE%E7%A0%81%E5%B8%B8%E8%A7%81%E7%9A%84api/" class="related-link">é“¾ç å¸¸è§çš„API</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/fabricnodesdk/%E4%BA%8B%E4%BB%B6%E7%9A%84%E7%9B%91%E5%90%AC%E4%BD%BF%E7%94%A8/" class="related-link">fabricäº‹ä»¶çš„ç›‘å¬ä½¿ç”¨</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/fabric%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/fabric%E4%B8%AD%E7%9A%84%E8%B4%A6%E6%9C%AC%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" class="related-link">Fabricä¸­çš„è´¦æœ¬æ•°æ®å­˜å‚¨</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/fabric%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/fabric%E4%B8%AD%E7%9A%84%E8%AF%BB%E5%86%99%E9%9B%86/" class="related-link">Fabricä¸­çš„è¯»å†™é›†</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/chaincode%E5%BC%80%E5%8F%91/fabric%E5%90%AF%E7%94%A8couchdb%E4%BD%9C%E4%B8%BA%E7%8A%B6%E6%80%81%E6%95%B0%E6%8D%AE%E5%BA%93/" class="related-link">Fabricå¯ç”¨CouchDBä½œä¸ºçŠ¶æ€æ•°æ®åº“</a>
                    </li>
                
            </ul>
        </div>
    



        
    
        <div class="post-tags">
            
                
                
                
                
                    
                    <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>åŒºå—é“¾</a>
                
            
                
                
                
                
                    
                    <a href="/tags/golang/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>golang</a>
                
            
        </div>
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="/posts/fabricnodesdk/%E4%BA%A4%E6%98%93invoke%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="prev">&lt; äº¤æ˜“invokeçš„ä½¿ç”¨</a>
                </li>
            
            
                <li class="post-nav-next">
                    <a href="/posts/fabricnodesdk/ccp-connection-file%E7%9A%84%E8%AE%BE%E7%BD%AE/" rel="next">ccpæ–‡ä»¶çš„è®¾ç½® &gt;</a>
                </li>
            
        </ul>
    



        
    

        <div class="load-comments">
            <div id="load-comments">åŠ è½½è¯„è®º</div>
        </div>

        

        

        

    



    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">Â©&nbsp;2018â€“2020&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;Bun</div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div><div class="site-copyright"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></div>
                <div class="busuanzi-site-uv-and-pv">
                    <span id="busuanzi_container_site_uv">æœ¬ç«™è®¿å®¢æ•°&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon busuanzi-site-uv"><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"/></svg>&nbsp;<span id="busuanzi_value_site_uv"></span></span>&nbsp;|&nbsp;<span id="busuanzi_container_site_pv">æœ¬ç«™è®¿é—®é‡&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon busuanzi-site-pv"><path d="M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"/></svg>&nbsp;<span id="busuanzi_value_site_pv"></span></span>
                </div>

            
    
        <ul class="socials"><li class="socials-item">
                    <a href="/rss.xml" target="_blank" rel="external noopener" title="RSS"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></a>
                </li><li class="socials-item">
                    <a href="1071285741@qq.com" target="_blank" rel="external noopener" title="Email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://github.com/VegeBun-csj" target="_blank" rel="external noopener" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://twitter.com/bun" target="_blank" rel="external noopener" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://t.me/bun" target="_blank" rel="external noopener" title="Telegram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon social-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a>
                </li></ul>
    



            
        </div>
    </footer>


        </div>
        

        






    

        

        

        

    



    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    mediumZoom(document.querySelectorAll('div.post-body img'), {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>




    <script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>




    
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




    </body>
</html>
